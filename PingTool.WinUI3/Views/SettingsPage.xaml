<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="PingTool.Views.SettingsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <ScrollViewer Padding="24,16">
        <StackPanel Spacing="20" MaxWidth="700">
            <!-- Header -->
            <StackPanel Orientation="Horizontal" Spacing="12" Margin="0,0,0,8">
                <Border
                    Width="44"
                    Height="44"
                    CornerRadius="10"
                    Background="{StaticResource AccentGradientBrush}">
                    <FontIcon
                        FontFamily="{StaticResource SymbolThemeFontFamily}"
                        Glyph="&#xE713;"
                        FontSize="20"
                        Foreground="White"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center" />
                </Border>
                <StackPanel VerticalAlignment="Center">
                    <TextBlock
                        Text="Settings"
                        FontSize="24"
                        FontWeight="Bold" />
                    <TextBlock
                        Text="Customize your experience"
                        FontSize="12"
                        Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                </StackPanel>
            </StackPanel>

            <!-- Appearance Section -->
            <Border Style="{StaticResource ModernCardStyle}">
                <StackPanel Spacing="16">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <FontIcon
                            FontFamily="{StaticResource SymbolThemeFontFamily}"
                            Glyph="&#xE790;"
                            FontSize="16"
                            Foreground="{StaticResource PrimaryAccentBrush}" />
                        <TextBlock
                            Text="Appearance"
                            FontWeight="SemiBold"
                            FontSize="16" />
                    </StackPanel>

                    <TextBlock
                        Text="Choose your preferred theme"
                        FontSize="12"
                        Foreground="{ThemeResource TextFillColorSecondaryBrush}" />

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <RadioButton
                            x:Name="LightThemeRadio"
                            GroupName="Theme"
                            Checked="ThemeRadio_Checked"
                            Tag="Light"
                            HorizontalAlignment="Stretch"
                            HorizontalContentAlignment="Center">
                            <StackPanel Spacing="8" HorizontalAlignment="Center">
                                <Border
                                    Width="48"
                                    Height="48"
                                    CornerRadius="8"
                                    Background="#F3F4F6"
                                    BorderBrush="{ThemeResource ControlStrokeColorDefaultBrush}"
                                    BorderThickness="1">
                                    <FontIcon
                                        FontFamily="{StaticResource SymbolThemeFontFamily}"
                                        Glyph="&#xE706;"
                                        FontSize="24"
                                        Foreground="#374151" />
                                </Border>
                                <TextBlock Text="Light" FontSize="12" HorizontalAlignment="Center" />
                            </StackPanel>
                        </RadioButton>

                        <RadioButton
                            x:Name="DarkThemeRadio"
                            Grid.Column="1"
                            GroupName="Theme"
                            Checked="ThemeRadio_Checked"
                            Tag="Dark"
                            HorizontalAlignment="Stretch"
                            HorizontalContentAlignment="Center">
                            <StackPanel Spacing="8" HorizontalAlignment="Center">
                                <Border
                                    Width="48"
                                    Height="48"
                                    CornerRadius="8"
                                    Background="#1F2937"
                                    BorderBrush="{ThemeResource ControlStrokeColorDefaultBrush}"
                                    BorderThickness="1">
                                    <FontIcon
                                        FontFamily="{StaticResource SymbolThemeFontFamily}"
                                        Glyph="&#xE708;"
                                        FontSize="24"
                                        Foreground="#F9FAFB" />
                                </Border>
                                <TextBlock Text="Dark" FontSize="12" HorizontalAlignment="Center" />
                            </StackPanel>
                        </RadioButton>

                        <RadioButton
                            x:Name="SystemThemeRadio"
                            Grid.Column="2"
                            GroupName="Theme"
                            Checked="ThemeRadio_Checked"
                            Tag="Default"
                            HorizontalAlignment="Stretch"
                            HorizontalContentAlignment="Center">
                            <StackPanel Spacing="8" HorizontalAlignment="Center">
                                <Border
                                    Width="48"
                                    Height="48"
                                    CornerRadius="8"
                                    BorderBrush="{ThemeResource ControlStrokeColorDefaultBrush}"
                                    BorderThickness="1">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#F3F4F6" Offset="0" />
                                            <GradientStop Color="#F3F4F6" Offset="0.5" />
                                            <GradientStop Color="#1F2937" Offset="0.5" />
                                            <GradientStop Color="#1F2937" Offset="1" />
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <FontIcon
                                        FontFamily="{StaticResource SymbolThemeFontFamily}"
                                        Glyph="&#xE771;"
                                        FontSize="24"
                                        Foreground="{StaticResource PrimaryAccentBrush}" />
                                </Border>
                                <TextBlock Text="System" FontSize="12" HorizontalAlignment="Center" />
                            </StackPanel>
                        </RadioButton>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- Ping Settings Section -->
            <Border Style="{StaticResource ModernCardStyle}">
                <StackPanel Spacing="16">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <FontIcon
                            FontFamily="{StaticResource SymbolThemeFontFamily}"
                            Glyph="&#xE968;"
                            FontSize="16"
                            Foreground="{StaticResource PrimaryAccentBrush}" />
                        <TextBlock
                            Text="Ping Settings"
                            FontWeight="SemiBold"
                            FontSize="16" />
                    </StackPanel>

                    <!-- Setting Row -->
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <StackPanel>
                            <TextBlock Text="Auto-start ping on launch" FontSize="14" />
                            <TextBlock
                                Text="Automatically begin pinging when you open the app"
                                FontSize="11"
                                Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                        </StackPanel>
                        <ToggleSwitch
                            x:Name="AutoStartToggle"
                            Grid.Column="1"
                            Toggled="AutoStartToggle_Toggled"
                            OnContent=""
                            OffContent="" />
                    </Grid>

                    <Border
                        Height="1"
                        Background="{ThemeResource ControlStrokeColorDefaultBrush}" />

                    <!-- Notification Setting -->
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <StackPanel>
                            <TextBlock Text="Connection drop notifications" FontSize="14" />
                            <TextBlock
                                Text="Show toast notification when connection is lost"
                                FontSize="11"
                                Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                        </StackPanel>
                        <ToggleSwitch
                            x:Name="NotificationToggle"
                            Grid.Column="1"
                            Toggled="NotificationToggle_Toggled"
                            IsOn="True"
                            OnContent=""
                            OffContent="" />
                    </Grid>
                </StackPanel>
            </Border>

            <!-- Data & Storage Section -->
            <Border Style="{StaticResource ModernCardStyle}">
                <StackPanel Spacing="16">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <FontIcon
                            FontFamily="{StaticResource SymbolThemeFontFamily}"
                            Glyph="&#xE74C;"
                            FontSize="16"
                            Foreground="{StaticResource PrimaryAccentBrush}" />
                        <TextBlock
                            Text="Data &amp; Storage"
                            FontWeight="SemiBold"
                            FontSize="16" />
                    </StackPanel>

                    <!-- History Retention Period -->
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <StackPanel>
                            <TextBlock Text="History retention period" FontSize="14" />
                            <TextBlock
                                Text="Automatically delete history older than this"
                                FontSize="11"
                                Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                        </StackPanel>
                        <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="8">
                            <NumberBox
                                x:Name="RetentionDaysBox"
                                Width="100"
                                Minimum="1"
                                Maximum="365"
                                SpinButtonPlacementMode="Compact"
                                ValueChanged="RetentionDaysBox_ValueChanged" />
                            <TextBlock 
                                Text="days" 
                                VerticalAlignment="Center"
                                Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                        </StackPanel>
                    </Grid>

                    <Border
                        Height="1"
                        Background="{ThemeResource ControlStrokeColorDefaultBrush}" />

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <StackPanel>
                            <TextBlock Text="Clear ping history" FontSize="14" />
                            <TextBlock
                                Text="Remove all saved ping data from the database"
                                FontSize="11"
                                Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                        </StackPanel>
                        <Button
                            Grid.Column="1"
                            Click="ClearHistory_Click">
                            <StackPanel Orientation="Horizontal" Spacing="6">
                                <FontIcon
                                    FontFamily="{StaticResource SymbolThemeFontFamily}"
                                    Glyph="&#xE74D;"
                                    FontSize="12" />
                                <TextBlock Text="Clear" />
                            </StackPanel>
                        </Button>
                    </Grid>

                    <Border
                        Height="1"
                        Background="{ThemeResource ControlStrokeColorDefaultBrush}" />

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <StackPanel>
                            <TextBlock Text="Clear unified history" FontSize="14" />
                            <TextBlock
                                Text="Remove all history from Ping, Traceroute, Port Scan, Speed Test"
                                FontSize="11"
                                Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                        </StackPanel>
                        <Button
                            Grid.Column="1"
                            Click="ClearUnifiedHistory_Click">
                            <StackPanel Orientation="Horizontal" Spacing="6">
                                <FontIcon
                                    FontFamily="{StaticResource SymbolThemeFontFamily}"
                                    Glyph="&#xE74D;"
                                    FontSize="12" />
                                <TextBlock Text="Clear All" />
                            </StackPanel>
                        </Button>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- About Section -->
            <Border Style="{StaticResource ModernCardStyle}">
                <StackPanel Spacing="16">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <FontIcon
                            FontFamily="{StaticResource SymbolThemeFontFamily}"
                            Glyph="&#xE946;"
                            FontSize="16"
                            Foreground="{StaticResource PrimaryAccentBrush}" />
                        <TextBlock
                            Text="About"
                            FontWeight="SemiBold"
                            FontSize="16" />
                    </StackPanel>

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <Image
                            Width="64"
                            Height="64"
                            Margin="0,0,16,0"
                            Source="ms-appx:///Assets/Logo.png"
                            Stretch="UniformToFill" />
                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                            <TextBlock
                                Text="Ping Legacy"
                                FontSize="20"
                                FontWeight="Bold" />
                            <TextBlock
                                x:Name="VersionText"
                                Text="Version 2.0.0"
                                FontSize="12"
                                Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                            <TextBlock
                                Text="A modern network diagnostic tool for Windows"
                                FontSize="12"
                                Margin="0,4,0,0"
                                Foreground="{ThemeResource TextFillColorTertiaryBrush}" />
                        </StackPanel>
                    </Grid>

                    <Border
                        Height="1"
                        Background="{ThemeResource ControlStrokeColorDefaultBrush}" />

                    <!-- Links -->
                    <StackPanel Orientation="Horizontal" Spacing="12">
                        <HyperlinkButton NavigateUri="https://github.com/avikeid2007/Ping-Tool">
                            <StackPanel Orientation="Horizontal" Spacing="6">
                                <FontIcon
                                    FontFamily="{StaticResource SymbolThemeFontFamily}"
                                    Glyph="&#xE71B;"
                                    FontSize="14" />
                                <TextBlock Text="GitHub" />
                            </StackPanel>
                        </HyperlinkButton>

                        <HyperlinkButton NavigateUri="https://github.com/avikeid2007/Ping-Tool/issues">
                            <StackPanel Orientation="Horizontal" Spacing="6">
                                <FontIcon
                                    FontFamily="{StaticResource SymbolThemeFontFamily}"
                                    Glyph="&#xE939;"
                                    FontSize="14" />
                                <TextBlock Text="Report Issue" />
                            </StackPanel>
                        </HyperlinkButton>

                        <HyperlinkButton NavigateUri="https://github.com/avikeid2007/Ping-Tool/releases">
                            <StackPanel Orientation="Horizontal" Spacing="6">
                                <FontIcon
                                    FontFamily="{StaticResource SymbolThemeFontFamily}"
                                    Glyph="&#xE896;"
                                    FontSize="14" />
                                <TextBlock Text="Releases" />
                            </StackPanel>
                        </HyperlinkButton>
                    </StackPanel>

                    <TextBlock
                        Text="Â© 2024 Avikeid. All rights reserved."
                        FontSize="11"
                        Foreground="{ThemeResource TextFillColorTertiaryBrush}" />
                </StackPanel>
            </Border>
        </StackPanel>
    </ScrollViewer>
</Page>
